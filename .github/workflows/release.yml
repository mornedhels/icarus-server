name: Release

on:
  release:
    types: [released]

concurrency: Release-${{ github.ref }}

jobs:
  docker-build:
    uses: ./.github/workflows/docker-build.yml
    with:
      image-name: icarus-server
      image-tag: |
        ${{ github.event.release.tag_name }}
        latest
    secrets:
      CONTAINER_REGISTRY_PASSWORD: ${{ secrets.DOCKER_TOKEN }}

